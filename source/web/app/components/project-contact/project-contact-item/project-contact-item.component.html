<style>
  .pci-layout {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: .5fr .5fr .5fr 1fr;
    grid-template-areas: "info" "mainMessage" "lastAnswer" "answer"
  }

  .main-message {
    grid-area: mainMessage;
  }

  .info {
    grid-area: info;
    display: flex;
    justify-content: space-between;
  }

  .last-answer {
    grid-area: lastAnswer;
    display: flex;
    flex-direction: column;
    align-items: center;
  }



  .answer {
    grid-area: answer;
    display: flex;
    flex-direction: row-reverse;
  }

  .answer-form {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

  .btn-answer-form {
    display: flex;
    flex-direction: row-reverse;
  }

  .mat-icon-button {
    margin-left: 20px;
  }

</style>

<section class="pci-layout">
  <div class="info">
    <span class="mat-body-2 creation-date">{{contactItem.creationDate | date: 'dd/MM/yyyy - HH:mm'}}</span>
    <mat-chip-list aria-label="more info" class="more-info">
<!--      <a routerLink="{{contactItem.id}}/messages"><mat-chip>ver +</mat-chip></a>-->
      <mat-chip (click)="goToMessages(contactItem)">ver +</mat-chip>
    </mat-chip-list>
  </div>
  <span class="mat-h4 main-message">{{contactItem.message}}
    <mat-divider></mat-divider>
  </span>

  <div class="last-answer" *ngIf="loadingLastMessage">
    <label>carregando mensagem...</label>
    <mat-spinner></mat-spinner>
  </div>

  <div class="last-answer" *ngIf="!loadingLastMessage">
    <span class="mat-card-subtitle last-answer">Última mensagem | mock.date | Mock:fulano@email.com</span>
    <span class="mat-body-2">
    {{contactItem.messages[0].text}}
  </span>
  </div>

  <div class="mat-body-2 answer">
    <button *ngIf="!viewAnswerFormState" mat-button mat-raised color="primary"
            (click)="changeViewAnswerFormState()">MENSAGEM
    </button>

    <form class="answer-form" *ngIf="viewAnswerFormState" [formGroup]="answerForm" (ngSubmit)="onSubmit()">
      <otus-input-text-area title="Escreva uma nova mensagem" class="answer-input"
                            controlName="answer"
                            [formGroup]="answerForm"
                            rows=3
                            placeholder="Ex. Não funcionou o procedimento, preciso de mais detalhes">
      </otus-input-text-area>
      <div class="btn-answer-form">
        <button mat-icon-button type="submit" mat-button color="primary">
          <mat-icon>save</mat-icon>
        </button>

        <button mat-icon-button type="reset" mat-button color="primary" (click)="onReset()">
          <mat-icon>clear</mat-icon>
        </button>

        <button mat-icon-button type="button" mat-button color="primary" (click)="changeViewAnswerFormState()">
          <mat-icon>undo</mat-icon>
        </button>
      </div>
    </form>
  </div>

</section>



